# 寻求pthread支持
find_package(Threads)

# 创建parallelRWFile库
add_library(ParallelRWFile STATIC parallelRWFile.cpp)

target_include_directories(ParallelRWFile PUBLIC
    "${PROJECT_BINARY_DIR}"
    "${PROJECT_SOURCE_DIR}/src/threadPool"
)

target_link_libraries(ParallelRWFile
    PUBLIC "${CMAKE_THREAD_LIBS_INIT}"
    PUBLIC ThreadPool
)

# 安装并行读取库
install(TARGETS ParallelRWFile DESTINATION ${PROJECT_SOURCE_DIR}/lib)
install(FILES parallelRWFile.h DESTINATION ${PROJECT_SOURCE_DIR}/include)